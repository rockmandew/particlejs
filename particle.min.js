/*
 *	ParticleJS version 0.2.4 ALPHA
 *
 *	Dual license - see site for details (TBA):
 *  http://epistemex.github.io/particlejs
 *
 *	By Epistemex / Ken Fyrstenberg (c) 2014-2015
 *	www.epistemex.com
*/
"use strict";var ParticleJS={Physics2D:{},Shader2D:{},Emitter2D:{},Tools:{}};Array.prototype.forEach=function(b,a){var g=Object(this),e=g.length|0,f=(a===void 0||a===null),d=0;for(;d<e;d++){if(d in g){if(f){b(g[d],d,g)}else{b.call(a,g[d],d,g)}}}};ParticleJS.Tools.getMapImage=function(e,d,a){var b=document.createElement("canvas"),c=b.getContext("2d"),f=e.cellWidth*0.5;b.width=e.width;b.height=e.height;if(a){c.fillStyle=a;c.fillRect(0,0,b.width,b.height)}c.strokeStyle=d?d:"#fff";e.forEach(function(j,k){var i=e.getVectorAtCellXY(j,k),g=i.getMag(),h=f*g;c.setTransform(1,0,0,1,j*e.cellWidth+f,k*e.cellHeight+e.cellHeight*0.5);if(g){c.rotate(i.getAngle());c.moveTo(-h,0);c.lineTo(h,0);c.rect(h,-1,2,2)}else{c.rect(-0.5,-0.5,1,1)}});c.stroke();return b};ParticleJS.Tools.CreateHitMapFromLine=function(x,o,y,A,z,B,u,n){n=n||1;var k,m,s,j,t,r=0,q=new Uint16Array(6),p,b=Math.max(1,u>>n),d=y>>n,f=A>>n,e=z>>n,g=B>>n,c=x>>n,a=o>>n,v=!1;q[0]=Math.max(0,Math.min(d,e)-b);q[1]=Math.max(0,Math.min(f,g)-b);q[2]=Math.min(c,Math.max(d,e)-q[0]+b);q[3]=Math.min(a,Math.max(f,g)-q[1]+b);q[4]=q[0]+q[2];q[5]=q[1]+q[3];if(y===z||A===B){v=!0}else{k=document.createElement("canvas");m=k.getContext("2d");k.width=c;k.height=a;m.strokeStyle="#fff";m.lineWidth=b;m.lineCap="round";m.moveTo(d,f);m.lineTo(e,g);m.stroke();s=m.getImageData(q[0],q[1],q[2],q[3]);j=new Uint32Array(s.data.buffer);t=j.length;p=new Uint8Array(t);for(;r<t;r++){p[r]=Math.min(1,j[r])}}this.test=function(l,w){l=(l>>n)-q[0];w=(w>>n)-q[1];if(l>=0&&l<q[2]&&w>=0&&w<q[3]){if(v){return !0}else{var h=q[2]*w+l;if(p[h]){return !0}}}return !1}};ParticleJS.Tools.GridObject=function(e,c,a,b){var d=a*b;this.length=d;this.width=e;this.height=c;this.cellsX=a;this.cellsY=b;this.cellWidth=e/a;this.cellHeight=c/b;this.vectors=null;this.clear()};ParticleJS.Tools.GridObject.prototype.forEach=function(c){var d,e=0,a=this.cellsX,b=this.cellsY;for(;e<b;e++){for(d=0;d<a;d++){c(d,e)}}};ParticleJS.Tools.GridObject.prototype.getIndexFromCellXY=function(a,b){return b*this.cellsY+a};ParticleJS.Tools.GridObject.prototype.getIndexFromPosXY=function(d,e){var b=(d/this.cellWidth)|0,c=(e/this.cellHeight)|0,a=c*this.cellsY+b;if(a<0||a>=this.length){a=-1}return a};ParticleJS.Tools.GridObject.prototype.getVectorAtPosXY=function(b,c){var a=this.getIndexFromPosXY(b,c);return a>-1?this.vectors[this.getIndexFromPosXY(b,c)]:new Vector()};ParticleJS.Tools.GridObject.prototype.getVectorAtCellXY=function(a,b){return this.vectors[this.getIndexFromCellXY(a,b)]};ParticleJS.Tools.GridObject.prototype.getVectorAtIndex=function(a){return this.vectors[a]};ParticleJS.Tools.GridObject.prototype.setVectorAtPosXY=function(c,d,b){var a=this.getIndexFromPosXY(c,d);if(a>-1){this.vectors[a]=b}};ParticleJS.Tools.GridObject.prototype.setVectorAtCellXY=function(a,b,d){var c=this.getIndexFromCellXY(a,b);this.vectors[c]=d};ParticleJS.Tools.GridObject.prototype.setVectorAtIndex=function(a,b){this.vectors[a]=b};ParticleJS.Tools.GridObject.prototype.clear=function(){var b=this.length;this.vectors=new Array(b);for(var a=0;a<b;a++){this.vectors[a]=new Vector()}};ParticleJS.Tools.GridObject.prototype.getAngleDist=function(a,b,e,f){var c=a*this.cellWidth+this.cellWidth*0.5-e,d=b*this.cellHeight+this.cellHeight*0.5-f;return{angle:Math.atan2(d,c),dist:Math.abs(c*c+d*d)}};ParticleJS.Tools.GridObject.prototype.getAngleDistVector=function(a,b,d,e){var c=new Vector();c.x=d-(a*this.cellWidth+this.cellWidth*0.5);c.y=e-(b*this.cellHeight+this.cellHeight*0.5);return c};ParticleJS.Tools.GridObject.prototype.scale=function(a){this.width*=a;this.height*=a;this.gridWidth=this.width/this.cellsX;this.gridHeight=this.height/this.cellsY;for(var b=0,c;c=this.vectors[b];b++){c.scale(a)}};ParticleJS.Tools.GridObject.prototype.getMapObj=function(){return{width:this.width,height:this.height,cellsX:this.cellsX,cellsY:this.cellsY,vectors:this.vectors.slice(0)}};ParticleJS.Tools.GridObject.prototype.setMapObj=function(b){var a=b.cellsX*b.cellsY;if(b.cellsX<1||b.cellsY<1||b.width<1||b.height<1||a!==b.vectors.length||!b.vectors[0] instanceof Vector){throw"Not a correctly initialized map object."}this.length=a;this.width=b.width;this.height=b.height;this.cellsX=b.cellsX;this.cellsY=b.cellsY;this.cellWidth=this.width/this.cellsX;this.cellHeight=this.height/this.cellsY;this.vectors=b.vectors};ParticleJS.Scene=function(e){e=e||{};var f=e.width||512,c=e.height||256,b=!!e.frameBound,a=e.FPS||60,d=performance.now();this.emitters=[];this.addEmitter=function(g){g.init({width:f,height:c});this.emitters.push(g);return this};this.pause=function(){for(var h=0,g;g=this.emitters[h];h++){g.pause()}return this};this.play=function(){for(var h=0,g;g=this.emitters[h];h++){g.play()}return this};this.stop=function(){for(var h=0,g;g=this.emitters[h];h++){g.stop()}return this};this.preRoll=function(h){var l=performance.now();for(var k=0;k<h;k++){for(var j=0,g;g=this.emitters[j];j++){}}return this};this.render=function(){var m=performance.now(),j=1000/60,g=m-d,n=b?60/a:g/j;d=m;for(var k=0,h;h=this.emitters[k];k++){if(!h.isPaused()){var l=h.birthRate()*n/a;if(l){l+=h.remainder;h.remainder=(l-(l|0));l=l|0;if(l){h.generateParticles(m,l)}}h.renderParticles(m,n);h.cleanupParticles(m)}}return this};this.renderNoGeneration=function(){var l=performance.now(),j=1000/60,g=l-d,m=b?60/a:g/j;d=l;for(var k=0,h;h=this.emitters[k++];){h.renderParticles(l,m);h.cleanupParticles(l)}return this}};ParticleJS.Emitter2D=function(L){L=L||{};var J=this,au,B,q=Math.PI/180,O=0,ar=["point","line","box","grid"],aq=ar.indexOf(L.type?L.type:"point"),av=L.x,aw=L.y,s=L.endX||100,t=L.endY||0,f=L.boxRadius||50,A=L.gridWidth||100,z=L.gridHeight||100,j=L.cellsX||5,k=L.cellsY||5,l=A/j,i=z/k,d=D(L.birthRate)?L.birthRate:100,at=(D(L.velocity)?L.velocity:100)*0.01,v=D(L.globalForce)?L.globalForce:1,K=D(L.opacity)?L.opacity:1,ae=D(L.size)?L.size:1,H=(D(L.life)?L.life:3)*1000,e=D(L.blur)?L.blur:0,Z=D(L.rotation)?L.rotation:0,ac=Z*q,ab=D(L.rotationOffset)?L.rotationOffset:0,aa=ab*q,I=D(L.maxParticles)?L.maxParticles:8000,U=D(L.randomLife)?L.randomLife:0,Y=D(L.randomVelocity)?L.randomVelocity:0,V=D(L.randomOpacity)?L.randomOpacity:0,X=D(L.randomSize)?L.randomSize:0,T=D(L.randomBlur)?L.randomBlur:0,W=D(L.randomRotation)?L.randomRotation:0,af=D(L.spreadAngle)?L.spreadAngle:360,ah=D(L.spreadOffset)?L.spreadOffset:0,ag=af*q,ai=ah*q,p=L.debug||!1,r=null,ad,R=L.preRender||!1,Q=L.postRender||!1,g=L.callback||null,o=0,S=L.reverseRenderOrder||!1,M=[],N=[],n=0,m=1000,ao=L.linearTimeStepX||0,ap=L.linearTimeStepY||0,an=L.linearTimeStepAngle||0,E=L.linearPingPongX||!1,G=L.linearPingPongY||!1,F=L.linearPingPongAngle||!1,al=0,am=0,ak=0,P,aj,c;this.sizeOverLife=new Float32Array([1]);this.opacityOverLife=new Float32Array([1]);this.blurOverLife=new Float32Array([1]);this.rotationOverLife=new Float32Array([1]);this.count=0;this._pauseTime=null;this.remainder=0;this.init=function(h){au=h.width;B=h.height;if(L.shader){J.setShader(L.shader)}};this.generateParticles=function(aI,az){var h=0,aJ,aH,aA,x,aE,ay,aD,ax=(H>0),aB,w,aG,aF;if(ax){aB=u(this.opacityOverLife,0);w=u(this.blurOverLife,0);aG=u(this.sizeOverLife,0);aF=u(this.rotationOverLife,0)}else{aB=w=aG=aF=1}while(az--){var aC=new ParticleJS.Particle2D(H===0);aD=P();ay=y(H,U)+16.67;aJ=y(at,Y);aH=y(ae,X);aA=y(K,V);x=y(e,T);aE=y(ac,W);h=c(ag,ai);aC.id=++O;aC.x=aD.x;aC.y=aD.y;aC.v=new Vector(h,aJ);aC.rotationO=aE;aC.rotation=aC.rotationO*aF+aa;aC.angle=h;aC.sizeO=aH;aC.size=aC.sizeO*aG;aC.sizeR=aC.sizeO*0.5;aC.life=ay;aC.born=aI;aC.opacityO=aA;aC.opacity=aA*aB;aC.blurO=e;aC.blur=e*w;aC.left=0;aC.top=0;aC.width=au;aC.height=B;M.push(aC)}function y(aL,aK){return aL-(aK*aL*Math.random())}};this.renderParticles=function(y,ax){var h,w;if(R){ad.preRender({count:o,particles:M})}o=0;x(M,N,v,g);this.count=o;if(Q){ad.postRender({count:o,total:O,particles:M})}if(p){if(!r){r=ad.getDrawObject()}r.begin();for(h=0;w=N[h];h++){w.showDebug({drawObject:r});r.reset()}r.commit()}for(h=0;w=N[h];h++){w.updateFrame({count:o})}function x(aD,aE,aB,ay){var aF,aC,az=J,aA=ax*aB;if(S){for(aF=aD.length-1;aC=aD[aF];aF--){if(o>=I){break}if(ay){ay({particle:aC})}aG(az,aA,aC)}}else{aF=Math.max(0,aD.length-I);for(;aC=aD[aF];aF++){if(o>=I){break}if(ay){ay({particle:aC})}aG(az,aA,aC)}}function aG(aH,aI,aM){var aL,aN,aK=0,aJ;aM.updateLife(y);if(aM.isActive){aJ=(H>0);o++;aL=aM.lifeIndex;if(aJ){aM.rotation=aM.rotationO*u(aH.rotationOverLife,aL)+aa;aM.opacity=aM.opacityO*u(aH.opacityOverLife,aL);aM.blur=aM.blurO*u(aH.blurOverLife,aL);aM.setSize(u(aH.sizeOverLife,aL))}for(;aN=aE[aK];aK++){aN.apply(aM)}aM.update(aI);if(aM.size>0&&aM.opacity){ad.renderParticle(aM)}}}}};this.cleanupParticles=function(x){if(x-m>n){n=x;var y=[],h=0,w;for(;w=M[h];h++){if(w.isActive){y.push(w)}}M=y}};this.addPhysics=function(w,h){if(w.init&&w.apply){N.push(w);w.init({width:au,height:B,callback:h})}return this};this.getPhysics=function(w){if(typeof w==="string"){for(var h=0,x;x=N[h];h++){if(x.id===w){return x}}}else{if(w>=0&&w<N.length){return N[w]}}return null};this.setShader=function(h){if(h&&h.init){ad=h;ad.init({width:au,height:B})}else{throw"Not a valid shader."}return this};this.overLifeGradient=function(az,w,ay){w.width=ay||64;w.generate();var h=new Float32Array(w.width),x=0,y=h.length,ax;for(;x<y;x++){ax=w.getColor(x/(y-1)).r;h[x]=ax/255}a(az,h);return this};this.overLifeBezier=function(aC,x,y,ax,ay,aB){var h=new Float32Array(aB||64),az=0,aA=h.length-1;for(;az<=aA;az++){h[az]=w(az/aA)}a(aC,h);function w(aE){function aD(aU,aP){var aN=3*x,aI=3*(ax-x)-aN,aF=1-aN-aI,aO=3*y,aK=3*(ay-y)-aO,aH=1-aO-aK,aG=aF*3,aJ=aI*2;function aM(a1,aW){var aY=0,aZ=1,a2,aV,a0=a1,aX=0;for(;aX<8;aX++){a2=aR(a0)-a1;if(Math.abs(a2)<aW){return a0}aV=aS(a0);if(Math.abs(aV)<1e-06){break}a0-=(a2/aV)}a0=a1;if(a0<aY){return aY}if(a0>aZ){return aZ}while(aY<aZ){a2=aR(a0);if(Math.abs(a2-a1)<aW){return a0}(a1>a2)?aY=a0:aZ=a0;a0=(aZ-aY)*0.5+aY}return a0}function aR(aV){return((aF*aV+aI)*aV+aN)*aV}function aT(aV){return((aH*aV+aK)*aV+aO)*aV}function aS(aV){return(aG*aV+aJ)*aV+aN}function aQ(aV){return 1/(0.2*aV)}function aL(aW,aV){return aT(aM(aW,aV))}return aL(aU,aQ(aP))}return aD(aE,1000)}return this};this.position=function(h,w){if(!arguments.length){return{x:av,y:aw}}av=h;aw=w;return this};this.line=function(h,x,w,y){if(!arguments.length){return{x0:av,y0:aw,x1:s,y1:t}}av=h;aw=x;s=w;t=y;return this};this.boxRadius=function(h){if(!arguments.length){return f}f=h;return this};this.gridSize=function(w,h){if(!arguments.length){return{width:A,height:z}}A=w;z=h;l=A/j;i=z/k;return this};this.gridCells=function(h,w){if(!arguments.length){return{cellsX:j,cellsY:k}}j=h;k=w;l=A/j;i=z/k;return this};this.type=function(h){if(!arguments.length){return ar[aq]}if(typeof h==="object"){aq=ar.indexOf(h.type?h.type:"point");av=h.x?h.x:av;aw=h.y?h.y:aw;switch(h.type){case"point":break;case"line":s=h.endX?h.endX:s;t=h.endY?h.endY:t;break;case"box":f=h.boxRadius?h.boxRadius:f;break;case"grid":A=h.gridWidth?h.gridWidth:A;z=h.gridHeight?h.gridHeight:z;j=h.cellsX?h.cellsX:j;k=h.cellsY?h.cellsY:k;break;default:throw"Unknown emitter type: "+h.type}b();return this}var w=ar.indexOf(h);if(w>-1){aq=w;a()}else{throw"Unknown emitter type: "+h}return this};this.birthRate=function(h){if(!arguments.length){return d}if(h<0){h=0}d=h;return this};this.blur=function(h){if(!arguments.length){return e}if(h<0){h=0}else{if(h>1){h=1}}e=h;return this};this.opacity=function(h){if(!arguments.length){return K}K=Math.min(1,Math.max(0,h));return this};this.life=function(h){if(!arguments.length){return H*0.001}if(h>=0){H=h*1000}return this};this.velocity=function(h){if(!arguments.length){return at*100}at=h*0.01;return this};this.size=function(h){if(!arguments.length){return ae}if(h<1){h=1}ae=h;return this};this.spreadAngle=function(h){if(!arguments.length){return h}af=h;ag=h*q;return this};this.spreadOffset=function(h){if(!arguments.length){return ah}ah=h;ai=h*q;return this};this.globalForce=function(h){if(!arguments.length){return v}v=h;return this};this.translate=function(h,w){var x,y;for(x=0;y=N[x];x++){if(y.translate){y.translate(h,w)}}for(x=0;y=M[x];x++){if(y.isActive){y.translate(h,w)}}av+=h;aw+=w;s+=h;t+=w;return this};this.rotate=null;this.scale=function(h){var w,x;for(w=0;x=N[w];w++){x.scale(h)}for(w=0;x=M[w];w++){x.scale(h)}av*=h;aw*=h;s*=h;t*=h;ae*=h;f*=h;return this};this.reverseRenderOrder=function(h){if(!arguments.length){return S}if(C(h)){S=h}return this};this.pause=function(){if(!this._pauseTime){this._pauseTime=performance.now()}return this};this.isPaused=function(){return !!this._pauseTime};this.play=function(){if(this._pauseTime){var h=performance.now()-this._pauseTime+1;for(var w=0,x;x=M[w];w++){x.born+=h}this._pauseTime=null}return this};this.stop=function(){return this.pause().clear()};this.clear=function(h){M=[];if(D(h)){this.birthRate(h)}return this};this.preRender=function(h){if(!arguments.length){return R}if(C(h)){R=h}return this};this.postRender=function(h){if(!arguments.length){return Q}if(C(h)){Q=h}return this};this.useLinearSpread=function(h,w){if(!arguments.length){return{stepX:ao,stepY:ap}}if(h<=0){ao=ap=0}else{ao=h;ap=w?w:h;al=am=0}b();return this};this.useLinearAngleSpread=function(h){if(!arguments.length){return an}if(h<=0){an=0}else{an=h;ak=0}b();return this};function D(h){return(typeof h==="number")}function C(h){return(typeof h==="boolean")}function u(h,y){var x=h.length-1,w=(x*y)|0;return h[w]||0}function a(w,h){switch(w){case"opacity":J.opacityOverLife=h;return this;case"size":J.sizeOverLife=h;return this;case"blur":J.blurOverLife=h;return this;case"rotation":J.rotationOverLife=h;return this}}function b(){P=aD();aj=aE();c=an>0?ax:ay;function aD(){switch(aq){case 1:return aB;case 2:return az;case 3:return aA;default:return aC}}function aE(){switch(aq){case 0:return null;case 1:return(ao>0)?h:w;case 2:case 3:return(ao>0&&ap>0)?x:y;default:return null}}function aC(){return{x:av,y:aw}}function aB(){var aG=aj();function aF(aH,aI,aJ){return aH+(aI-aH)*aJ}return{x:aF(av,s,aG),y:aF(aw,t,aG)}}function az(){var aF=aj();return{x:av+(aF[0]-0.5)*f,y:aw+(aF[1]-0.5)*f}}function aA(){var aH=aj(),aF=(aH[0]*j)|0,aG=(aH[1]*k)|0;return{x:av+aF*l,y:aw+aG*i}}function h(){al+=ao;if(al<0||al>1){if(E){al=al<=0?0:1;ao=-ao}else{al=0}}return al}function x(){al+=ao;if(al<0||al>1){if(E){al=al<=0?0:1;ao=-ao}else{al=0}am+=ap;if(am<0||am>1){if(G){am=am<=0?0:1;ap=-ap}else{am=0}}}return[al,am]}function w(){return Math.random()}function y(){return[Math.random(),Math.random()]}function ay(aF,aG){return aF*Math.random()+aG}function ax(aF,aG){ak+=an;if(ak<0||ak>1){if(F){ak=ak<=0?0:1;an=-an}else{ak=0}}return aF*ak+aG}}if(typeof L.type==="object"){}else{b()}};ParticleJS.Particle2D=function(a){this.id=0;this.x=0;this.y=0;this.px=0;this.py=0;this.v=null;this.vr=0;this.velocity=0;this.spreadAngle=0;this.angle=0;this.rotationO=0;this.rotation=0;this.size=0;this.sizeR=0;this.sizeO=0;this.opacity=1;this.opacityO=1;this.blur=0;this.blurO=0;this.born=0;this.life=0;this.lifeIndex=0;this.left=0;this.top=0;this.width=0;this.height=0;this.isHit=!1;this.isActive=!0;this.updateLife=a?this.updateLifeBound:this.updateLifeTime};ParticleJS.Particle2D.prototype={update:function(a){this.x+=this.v.x*a;this.y+=this.v.y*a;this.rotation+=this.vr*a},updateLifeTime:function(b){if(this.isActive){var a=b-this.born;this.lifeIndex=Math.max(0,Math.min(a/this.life,1));this.isActive=(this.lifeIndex<1)}},updateLifeBound:function(){var a=this.x,b=this.y;if(this.isActive){this.isActive=(a>=this.left&&a<this.width&&b>=this.top&&b<this.height)}},setSize:function(a){this.size=this.sizeO*a;this.sizeR=this.size*0.5},kill:function(){this.isActive=!1;this.lifeIndex=1;this.vx=this.vy=this.vr=0},getPositionAngle:function(){var a=this.px-this.x,b=this.py-this.y;return Math.atan2(b,a)},getVelocityAngle:function(){return this.v.getAngle()},getVelocityLengthSqrt:function(){var a=this.px-this.x,b=this.py-this.y;return Math.sqrt(a*a+b*b)},getVelocityLengthNoSqrt:function(){var a=this.px-this.x,b=this.py-this.y;return a*a+b*b},scale:function(a){this.x*=a;this.y*=a;this.vx*=a;this.vy*=a;this.sizeO*=a},translate:function(a,b){this.x+=a;this.y+=b;this.px+=a;this.py+=b}};ParticleJS.Physics2D.Air=function(c){c=c||{};var b=c.airResistance||0,a=1-b;this.id=c.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(d){if(d.callback){d.callback(!0)}};this.apply=function(d){d.v.scale(a)};this.updateFrame=function(d){};this.showDebug=function(d){};this.airResistance=function(d){if(!arguments.length){return b}b=d;a=(1-b);return this};this.scale=function(d){b*=d;a=(1-b);return this}};ParticleJS.Physics2D.Gravity=function(b){b=b||{};var a=new Vector();a.x=b.x||0;a.y=b.y||0;if(typeof b.angle==="number"&&typeof b.force==="number"){a.fromAngleMag(b.angle,optons.force)}this.id=b.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(c){if(c.callback){c.callback(!0)}};this.apply=function(c){c.v.add(a)};this.updateFrame=function(c){};this.showDebug=function(c){};this.gravityFromXY=function(c,d){if(!arguments.length){return a}a.x=c;a.y=d;return this};this.gravityFromVector=function(c){if(!arguments.length){return a}a.x=c.x;a.y=c.y;return this};this.gravityFromAngleDist=function(c,d){if(!arguments.length){return Math.atan2(a.y,a.x)}a.fromAngleMag(c,d);return this};this.gravityX=function(c){if(!arguments.length){return a.x}a.x=c;return this};this.gravityY=function(c){if(!arguments.length){return a.y}a.y=c;return this};this.scale=function(c){a.scale(c);return this}};ParticleJS.Physics2D.Waves=function(p){p=p||{};var o=this,c=p.angle||0,j=p.force||0,f=p.cellsX||32,g=p.cellsY||32,k=p.frequency||3,a=p.amplitude||0.5,b=0,m=!1,i=0.0174532925199433,d=c*i,q,l,n;this.id=p.id||"";this.isDirty=!0;this.canBlend=!0;this.init=function(h){q=h.width;l=h.height;n=new ParticleJS.Tools.GridObject(q,l,f,g);m=!0;e();if(h.callback){h.callback(!0)}};this.apply=function(h){if(j){var r=n.getVectorAtPosXY(h.x,h.y);h.v.addScale(r,j)}};function e(){if(!m){return}var r=Math.PI*2,h=n.cellsX-1,s=r*k;n.clear();n.forEach(function(w,z){var v=(w/h)*s,u=Math.sin(v)*t(a,b)+d;n.getVectorAtCellXY(w,z).fromAngleMag(u%r,1)});o.isDirty=!0;function t(w,u){return(1-u)*w+u*Math.random()}}this.updateFrame=function(h){};this.showDebug=function(r){var h=r.drawObject,t=q*0.5,s=t*j;h.translate(q*0.5,l*0.5);h.rotate(d);h.line(-s,0,s,0);h.rect(s,-1,3,3)};this.angle=function(h){if(!arguments.length){return c}c=h;d=h*i;e();return this};this.force=function(h){if(!arguments.length){return j}j=h;return this};this.angleAndForce=function(h,r){if(!arguments.length){return{force:j,angle:c}}j=r;c=h;d=h*i;e();return this};this.getMapImage=function(r,h){return ParticleJS.Tools.getMapImage(n,r,h)};this.scale=function(h){q*=h;l*=h;j*=h;n.scale(h);return this}};ParticleJS.Physics2D.Wind=function(e){e=e||{};var a=e.angle||0,d=e.force||0,c=0.0174532925199433,b=a*c,f=new Vector(b,d);this.id=e.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(g){if(g.callback){g.callback(!0)}};this.apply=function(g){if(d){g.v.add(f)}};this.updateFrame=function(g){};this.showDebug=function(i){var g=i.drawObject,k=w*0.5,j=k*d;g.translate(w*0.5,h*0.5);g.rotate(b);g.line(-j,0,j,0);g.rect(j,-1,3,3)};this.angle=function(g){if(!arguments.length){return a}a=g;b=g*c;f=new Vector(b,d);return this};this.angleRad=function(g){if(!arguments.length){return b}a=g*180/Math.PI;b=g;f=new Vector(g,d);return this};this.force=function(g){if(!arguments.length){return d}d=g;f=new Vector(b,d);return this};this.angleAndForce=function(g,i){if(!arguments.length){return f}d=i;this.angle(g);return this};this.scale=function(g){d*=g;f.scale(g);return this}};ParticleJS.Physics2D.Turbulence=function(s){s=s||{};var r=this,d=s.cellsX||32,e=s.cellsY||32,j=s.force||0,x=s.zSlices||20,v=s.slicesFrames||5,p=s.jitterInterval||10,o=s.jitterKeys||50,a=s.angleOctaves||2,i=s.forceOctaves||4,g=s.directionVariation||0.1,k=s.forceVariation||0.8,m=!1,y,l,t=0,u=0,n,q=new Array(x),f;this.id=s.id||"";this.isDirty=!0;this.canBlend=!0;this.init=function(h){y=h.width;l=h.height;m=!0;b();if(h.callback){h.callback(!0)}};this.apply=function(h){if(j){var w=f.getVectorAtPosXY(h.x,h.y);h.v.addScale(w,j)}};this.updateFrame=function(h){if(m&&j&&h.count){u++;if(u===v){u=0;t++;if(t===n.length){t=0;c()}f=q[n[t]]}}};this.showDebug=function(h){};function b(){if(!m){return}var I=0,E=Math.PI*2,F=E*Math.random()-Math.PI,C=d,D=e,G=new ParticleJS.Physics2D.Turbulence.SimplexNoise(),H=new ParticleJS.Physics2D.Turbulence.SimplexNoise();for(;I<x;I++){var A=new ParticleJS.Tools.GridObject(y,l,d,e),h=(I/x)*a,w=(I/x)*i;A.clear();A.forEach(function(K,L){var z=G.noise3D((K/C)*a,(L/D)*a,h),J=H.noise3D((K/C)*i,(L/D)*i,w);A.getVectorAtCellXY(K,L).fromAngleMag(z*E+F+E*g*Math.random(),B(1-(J*k)))});q[I]=A}t=0;f=q[0];c();r.isDirty=!0;function B(z){return Math.max(0,Math.min(1,z))}}function c(){var C=(o+1)*p-1,h=o*p,A=-1,B=0,w=0;n=new Uint8Array(C);for(;w<h;w++){if(w%p===0){if(A<0){A=(Math.random()*x)|0;B=(Math.random()*x)|0}else{A=B;B=(Math.random()*x)|0}}n[w]=z(A,B,(w%p)/p)}A=B;B=n[0];for(;w<C;w++){n[w]=z(A,B,(w%p)/p)}function z(D,E,F){return D+(E-D)*F}}this.force=function(h){if(!arguments.length){return j}j=h;return this};this.forceVariation=function(h){if(!arguments.length){return k}k=h;b();return this};this.offsetVariation=function(h){if(!arguments.length){return g}g=h;b();return this};this.jitterInterval=function(h){if(!arguments.length){return p}p=h;return this};this.sliceFrames=function(h){if(!arguments.length){return v}v=h;return this};this.octavesAngleMap=function(h){if(!arguments.length){return a}a=h|1;b();return this};this.octavesForceMap=function(h){if(!arguments.length){return i}i=h|1;b();return this};this.generate=function(){b();return this};this.getMapImage=function(w,h){return ParticleJS.Tools.getMapImage(f,w,h)};this.scale=function(h){y*=h;l*=h;j*=h;for(var w=0,z;z=q[w];w++){z.scale(h)}return this}};
/*
	SimplexNoise based on Stefan Gustavson's public domain Java
	implementation, ported to JavaScript by wwwtyro.

	Modified and optimized by Ken "Epistemex" Fyrstenberg, 2014.
	For details refer to original paper.

    See project at: https://github.com/epistemex/simplex-noise-js

	PUBLIC DOMAIN
 */
ParticleJS.Physics2D.Turbulence.SimplexNoise=function(){this.perm=new Uint8Array(512);this.perm12=new Uint8Array(512);this.grad=new Int8Array([1,1,0,0,-1,1,0,0,1,-1,0,0,-1,-1,0,0,1,0,1,0,-1,0,1,0,1,0,-1,0,-1,0,-1,0,0,1,1,0,0,-1,1,0,0,1,-1,0,0,-1,-1,0]);for(var a=0;a<256;a++){this.perm[a]=this.perm[a+256]=Math.random()*256;this.perm12[a]=this.perm12[a+256]=this.perm[a]%12<<2}};ParticleJS.Physics2D.Turbulence.SimplexNoise.prototype.noise3D=function(M,R,W){var G=(M+R+W)*0.33333333333,l=(M+G)|0,p=(R+G)|0,v=(W+G)|0,H=(l+p+v)*0.16666666667,N=M-(l-H),S=R-(p-H),X=W-(v-H),o=l&255,u=p&255,B=v&255,O,T,Y,P,U,Z,Q,V,aa,m,q,w,n,r,A,C,D,E,F,I,J,K,L,e,f,g,h,a=this.grad,b=this.perm,c=this.perm12;if(N>=S){if(S>=X){m=n=r=1;q=w=A=0}else{if(N>=X){m=n=A=1;q=w=r=0}else{m=q=r=0;w=n=A=1}}}else{if(S<X){m=n=q=0;w=r=A=1}else{if(N<X){m=w=n=0;q=r=A=1}else{m=w=A=0;q=n=r=1}}}O=N-m+0.16666666667;T=S-q+0.16666666667;Y=X-w+0.16666666667;P=N-n+0.33333333333;U=S-r+0.33333333333;Z=X-A+0.33333333333;Q=N-0.5;V=S-0.5;aa=X-0.5;e=c[o+b[u+b[B]]];f=c[o+m+b[u+q+b[B+w]]];g=c[o+n+b[u+r+b[B+A]]];h=c[o+1+b[u+1+b[B+1]]];I=0.6-(N*N+S*S+X*X);J=0.6-(O*O+T*T+Y*Y);K=0.6-(P*P+U*U+Z*Z);L=0.6-(Q*Q+V*V+aa*aa);C=D=E=F=0;if(I>=0){I*=I;C=I*I*d(a,e,N,S,X)}if(J>=0){J*=J;D=J*J*d(a,f,O,T,Y)}if(K>=0){K*=K;E=K*K*d(a,g,P,U,Z)}if(L>=0){L*=L;F=L*L*d(a,h,Q,V,aa)}function d(j,k,s,t,ab){return j[k]*s+j[k+1]*t+j[k+2]*ab}return 16*(C+D+E+F)+0.5};ParticleJS.Physics2D.Vortex=function(p){p=p||{};var o=this,e=p.x||0,f=p.y||0,r=p.radius||100,c=p.cellsX||32,d=p.cellsY||32,i=p.force||0,s=p.suction||0,g=(p.direction&&p.direction==="cw")?-1:1,l=p.innerForce||1,q=p.outerForce||0.05,a=p.angleVariation||0,j=p.forceVariation||0,m=!1,t,k,n;this.id=p.id||"";this.isDirty=!0;this.canBlend=!0;this.init=function(h){t=h.width;k=h.height;n=new ParticleJS.Tools.GridObject(t,k,c,d);m=!0;b();if(h.callback){h.callback(!0)}};this.apply=function(h){if(m&&i&&r){var u=n.getVectorAtPosXY(h.x,h.y);h.v.addScale(u,i)}};this.updateFrame=function(h){};this.showDebug=function(u){var h=u.drawObject;h.circle(e,f,r)};function b(){if(!m){return}var u=r*r,h=Math.PI*2,w=0.25*g*h,v=w*s;n.clear();n.forEach(function(A,B){var z=n.getAngleDist(A,B,e,f);if(z.dist<=u){n.getVectorAtCellXY(A,B).fromAngleMag(z.angle+w+v+Math.random()*a*h,l+(q-l)*(z.dist/u)*(1-Math.random()*j))}});o.isDirty=!0}this.direction=function(h){if(!arguments.length){return g<0?"cw":"ccw"}var u=h==="cw"?-1:1;if(u===g){return this}g=u;b();return this};this.radius=function(h){if(!arguments.length){return r}r=h;b();return this};this.force=function(h){if(!arguments.length){return i}i=h;return this};this.forceGradient=function(u,h){if(!arguments.length){return{outer:q,inner:l}}if(typeof u==="object"){q=u.outer;l=u.inner}else{q=u;l=h}b();return this};this.suction=function(h){if(!arguments.length){return s}s=h;b();return this};this.settings=function(h){if(!arguments.length){return{x:e,y:f,radius:r,cellsX:c,cellsY:d,force:i,innerForce:l,outerForce:q,suction:s}}e=h.x||f;f=h.y||e;r=(typeof h.radius==="number")?h.radius:r;c=h.cellsX||c;d=h.cellsY||d;i=(typeof h.force==="number")?h.force:i;s=(typeof h.suction==="number")?h.suction:s;q=(typeof h.outerForce==="number")?h.outerForce:q;l=(typeof h.innerForce==="number")?h.innerForce:l;b();return this};this.generate=function(){b();return this};this.getMapImage=function(u,h){return ParticleJS.Tools.getMapImage(n,u,h)};this.scale=function(h){t*=h;k*=h;e*=h;f*=h;r*=h;i*=h;n.scale(h);return this};this.translate=function(h,u){e+=h;f+=u;return this}};ParticleJS.Physics2D.Target=function(c){c=c||{};var d=c.x||0,e=c.y||0,a=c.force||0,b=c.lifeInfluence||0.5;this.id=c.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(f){if(f.callback){f.callback(!0)}};this.apply=function(h){if(a){var f=Math.atan2(e-h.y,d-h.x),g=1-b*(1-h.lifeIndex);h.v.addXY(a*g*Math.cos(f),a*g*Math.sin(f))}};this.updateFrame=function(f){};this.showDebug=function(f){f.drawObject.rect(d-4,e-4,8,8)};this.position=function(f,g){if(!arguments.length){return{x:d,y:e}}d=f;e=g;return this};this.targetX=function(f){if(!arguments.length){return d}d=f;return this};this.targetY=function(f){if(!arguments.length){return e}e=f;return this};this.force=function(g){if(!arguments.length){return a}a=g;return this};this.scale=function(g){a*=g;d*=g;e*=g;return this};this.translate=function(f,g){d+=f;e+=g;return this}};ParticleJS.Physics2D.Path=function(f){f=f||{};var g=f.path,i=(typeof f.tension==="number")?f.tension:0.5,e=f.isClosed||!1,h=a(g,i,e),d=h.length*0.5-1,b=f.force||0,c=f.influence||0;this.id=f.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(j){if(j.callback){j.callback(!0)}};this.apply=function(k){if(c){var j=(((k.lifeIndex*b*d)|0)%d)<<1,l=h[j],m=h[j+1];k.x=k.x*(1-c)+c*l;k.y=k.y*(1-c)+c*m}};this.updateFrame=function(){};this.showDebug=function(j){j.drawObj.moveTo(h[0],h[1]);for(var k=2,m=h.length;k<m;k+=2){j.drawObject.lineTo(h[k],h[k+1])}};this.path=function(k,l,j){if(!arguments.length){return g}g=k;i=(typeof l==="number")?l:0.5;e=j||!1;h=a(g,i,e);return this};this.getCurvePoints=function(){return h};this.force=function(j){if(!arguments.length){return b}b=j;return this};this.influence=function(j){if(!arguments.length){return c}c=j;return this};this.scale=function(j){b*=j;for(var k=0,m=h.length;k<m;k++){h[k]*=j}return this};this.translate=function(j,k){for(var m=0,n=h.length;m<n;m+=2){h[m]+=j;h[m+1]+=k}return this};function a(r,B,m){var p=20,s,n=1,o=r.length,v=0,u=(o-2)*p+2+(m?2*p:0),t=new Float32Array(u),j=new Float32Array((p+2)*4),k=4;s=r.slice(0);if(m){s.unshift(r[o-1]);s.unshift(r[o-2]);s.push(r[0],r[1])}else{s.unshift(r[1]);s.unshift(r[0]);s.push(r[o-2],r[o-1])}j[0]=1;for(;n<p;n++){var w=n/p,x=w*w,z=x*w,y=z*2,A=x*3;j[k++]=y-A+1;j[k++]=A-y;j[k++]=z-2*x+w;j[k++]=z-x}j[++k]=1;q(s,j,o);if(m){s=[];s.push(r[o-4],r[o-3],r[o-2],r[o-1]);s.push(r[0],r[1],r[2],r[3]);q(s,j,4)}function q(O,H,J){for(var I=2,P;I<J;I+=2){var K=O[I],L=O[I+1],M=O[I+2],N=O[I+3],Q=(M-O[I-2])*B,R=(N-O[I-1])*B,S=(O[I+4]-K)*B,T=(O[I+5]-L)*B;for(P=0;P<p;P++){var C=P<<2,D=H[C],E=H[C+1],F=H[C+2],G=H[C+3];t[v++]=D*K+E*M+F*Q+G*S;t[v++]=D*L+E*N+F*R+G*T}}}o=m?0:r.length-2;t[v++]=r[o];t[v]=r[o+1];return t}};ParticleJS.Physics2D.Collector=function(g){g=g||{};var k=g.x1,m=g.y1,l=g.x2,n=g.y2,i=g.radius||2,b=g.callback||null,e=(typeof g.isActive==="boolean")?g.isActive:!0,f=!1,d,j,c;this.id=g.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(h){j=h.width;c=h.height;f=!0;a();if(h.callback){h.callback(!0)}};this.apply=function(o){if(e&&d.test(o.x,o.y)){h(o)}function h(q){if(b){b({x1:k,y1:m,x2:l,y2:n,particle:q})}q.kill()}};function a(){if(f){d=new ParticleJS.Tools.CreateHitMapFromLine(j,c,k,m,l,n,i,2)}}this.updateFrame=function(h){};this.showDebug=function(h){h.drawObject.line(k,m,l,n)};this.line=function(h,p,o,q,s){if(!arguments.length){return{x1:k,y1:m,x2:l,y2:n,radius:i}}k=h;m=p;l=o;n=q;i=s||i;a();return this};this.isActive=function(h){if(!arguments.length){return e}e=h;return this};this.scale=function(h){i*=h;k*=h;m*=h;l*=h;n*=h;j*=h;c*=h;a();return this};this.translate=function(h,o){k+=h;m+=o;l+=h;n+=o;return this}};ParticleJS.Physics2D.Reflector=function(k){k=k||{};var n=k.x1,p=k.y1,o=k.x2,q=k.y2,l=k.radius||2,a=k.absorption||0,g=(typeof k.isActive==="boolean")?k.isActive:!0,d=k.callback||null,i=!1,b=Math.atan2(q-p,o-n),j={x:Math.sin(b),y:-Math.cos(b)},m,e,f;this.id=k.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(h){m=h.width;e=h.height;i=!0;c();if(h.callback){h.callback(!0)}};this.apply=function(h){if(g){if(f.test(h.x,h.y)){if(!h.isHit){h.v.reflect(j);h.v.scale((1-a));h.isHit=!0;if(d){d({x1:n,y1:p,x2:o,y2:q,particle:h})}}}else{h.isHit=!1}}};function c(){if(i){f=new ParticleJS.Tools.CreateHitMapFromLine(m,e,n,p,o,q,l,1)}}this.updateFrame=function(h){};this.showDebug=function(h){h.drawObject.line(n,p,o,q)};this.line=function(h,t,s,u,v){if(!arguments.length){return{x1:n,y1:p,x2:o,y2:q,radius:l}}n=h;p=t;o=s;q=u;l=v||l;b=Math.atan2(q-p,o-n);j={vx:Math.sin(b),vy:-Math.cos(b)};c();return this};this.isActive=function(h){if(!arguments.length){return g}g=h;return this};this.scale=function(h){l*=h;n*=h;p*=h;o*=h;q*=h;m*=h;e*=h;c();return this};this.translate=function(h,r){n+=h;p+=r;o+=h;q+=r;return this}};ParticleJS.Physics2D.Nozzle=function(t){t=t||{};var s=this,l=Math.PI/180,j=t.x||0,k=t.y||0,v=t.radius||100,g=t.cellsX||32,i=t.cellsY||32,m=t.force||0,p=t.innerForce||1,u=t.outerForce||0.05,e=t.angleVariation||0,n=t.forceVariation||0,a=t.spreadOffset||0,c=t.spreadAngle||360,b=a*l,d=c*l,q=!1,x,o,r;this.id=t.id||"";this.isDirty=!0;this.canBlend=!0;this.init=function(h){x=h.width;o=h.height;r=new ParticleJS.Tools.GridObject(x,o,g,i);q=!0;f();if(h.callback){h.callback(!0)}};this.apply=function(h){if(q&&m&&v){var w=r.getVectorAtPosXY(h.x,h.y);h.v.addScale(w,m)}};this.updateFrame=function(h){};this.showDebug=function(w){var h=w.drawObject;h.circle(j,k,v)};function f(){if(!q){return}var B=v*v,A=Math.PI*2,w=e*A,z=u-p,C=b,y=b+d;r.clear();r.forEach(function(E,F){var D=r.getAngleDist(E,F,j,k);if(D.dist<=B&&h(D.angle,C,y)){r.getVectorAtCellXY(E,F).fromAngleMag(D.angle+Math.random()*w,p+z*(D.dist/B)*(1-Math.random()*n))}});s.isDirty=!0;function h(D,F,E){while(D<0){D+=A}F=F%A;E=E%A;if(F>E){return((D>F)||(D<=E))}else{if(F<E){return((D<E)&&(D>=F))}}return(D===F)}}this.position=function(h,w){if(!arguments.length){return{x:j,y:k}}j=h;k=w;f();return this};this.angleAndForce=function(y,w,h){if(!arguments.length){return{spreadAngle:c,spreadOffset:a,force:m}}c=y;d=c*l;a=w;b=a*l;if(h){m=h}f()};this.spreadAngle=function(h){if(!arguments.length){return c}c=h;d=c*l;f();return this};this.offsetAngle=function(h){if(!arguments.length){return a}a=h;b=a*l;f();return this};this.radius=function(h){if(!arguments.length){return v}v=h;f();return this};this.force=function(h){if(!arguments.length){return m}m=h;return this};this.forceGradient=function(w,h){if(!arguments.length){return{outer:u,inner:p}}if(typeof w==="object"){u=w.outer;p=w.inner}else{u=w;p=h}f();return this};this.settings=function(h){};this.generate=function(){f();return this};this.getMapImage=function(w,h){return ParticleJS.Tools.getMapImage(r,w,h)};this.scale=function(h){x*=h;o*=h;j*=h;k*=h;v*=h;m*=h;r.scale(h);return this};this.translate=function(h,w){j+=h;k+=w;return this}};ParticleJS.Physics2D.Accelerator=function(b){b=b||{};var a=b.force||0;this.id=b.id||"";this.isDirty=!0;this.canBlend=!1;this.init=function(c){if(c.callback){c.callback(!0)}};this.apply=function(c){c.v.scale(1+a*c.lifeIndex)};this.updateFrame=function(c){};this.showDebug=function(c){};this.scale=function(c){return this};this.force=function(c){if(!arguments.length){return a}a=c;return this}};ParticleJS.Shader2D.Canvas=function(t){t=t||{};var d=t.canvas,l,I,o,i=null,G=t.spriteSize||32,F=G*0.5,g=t.clearOpacity||1,s=t.keepAlpha||!1,a=t.image||null,m=t.gradient||null,p=(m!==null),v=t.randomColor||!1,u=r(t.r)?t.r:255,n=r(t.g)?t.g:255,b=r(t.b)?t.b:255,x=t.scaleX||1,z=t.scaleY||1,y=x*0.5,A=z*0.5,B=t.sizeCells||30,H=1/B,e=t.colorCells||32,C=B-1,f=e-1,D=document.createElement("canvas"),E=document.createElement("canvas"),j=D.getContext("2d"),k=E.getContext("2d"),c=t.callback||null;this.init=function(h){I=d.width=h.width;o=d.height=h.height;l=d.getContext("2d");D.width=G*B;D.height=p?G*e:G;if(!p){e=0}else{m.generate()}E.width=D.width>>1;E.height=D.height>>1;q();if(typeof l.imageSmoothingEnabled!=="undefined"){l.imageSmoothingEnabled=!1}else{if(typeof l.oImageSmoothingEnabled!=="undefined"){l.oImageSmoothingEnabled=!1}else{if(typeof l.msImageSmoothingEnabled!=="undefined"){l.msImageSmoothingEnabled=!1}else{if(typeof l.mozImageSmoothingEnabled!=="undefined"){l.mozImageSmoothingEnabled=!1}else{if(typeof l.webkitImageSmoothingEnabled!=="undefined"){l.webkitImageSmoothingEnabled=!1}}}}}l.fillStyle="rgba(0,0,0,"+g+")";if(c){setTimeout(function(){c({success:!0})},9)}};this.getDrawObject=function(){return{begin:function(){l.beginPath()},close:function(){l.closePath()},arc:function(L,M,J,K,w,h){l.moveTo(L+J,M);l.arc(L,M,J,K,w,h?h:!1)},circle:function(w,J,h){l.moveTo(w+h,J);l.arc(w,J,h,0,2*Math.PI)},rect:function(L,M,K,J){l.rect(L,M,K,J)},moveTo:function(h,w){l.moveTo(h,w)},lineTo:function(h,w){l.lineTo(h,w)},line:function(h,J,w,K){l.moveTo(h,J);l.lineTo(w,K)},commit:function(){l.strokeStyle="#fff";l.stroke()},rotate:function(h){l.rotate(h)},translate:function(h,w){l.translate(h,w)},reset:function(){l.setTransform(1,0,0,1,0,0)},width:I,height:o}};this.preRender=function(){if(g===1){if(a){l.drawImage(a,0,0,I,o)}else{l.clearRect(0,0,I,o)}}else{l.globalAlpha=g;if(a){l.drawImage(a,0,0,I,o)}else{if(s){l.globalCompositeOperation="source-atop";l.fillRect(0,0,I,o);l.globalCompositeOperation="source-over"}else{l.fillRect(0,0,I,o)}}}};this.renderParticle=function(J){var w=(C*J.blur)|0,L=w*G,h=v?(f*Math.random())|0:p?(f*J.lifeIndex)|0:0,M=h*G,K=J.size;l.globalAlpha=J.opacity;if(K>F){l.drawImage(D,L,M,G,G,(J.x-K*y)|0,(J.y-K*A)|0,K*x,K*z)}else{l.drawImage(E,L>>1,M>>1,F,F,(J.x-K*y)|0,(J.y-K*A)|0,K*x,K*z)}};this.postRender=function(h){l.fillStyle="#fff";l.globalAlpha=1;l.fillText(h.count,10,10)};this.clear=function(){if(I){l.clearRect(0,0,I,o)}return this};this.clearOpacity=function(h){if(!arguments.length){return g}g=h;l.fillStyle="rgba(0,0,0,"+g+")";return this};this.keepAlpha=function(h){if(typeof h==="boolean"){s=h;return this}else{return s}};this.setClip=function(h){l.save();if(!Array.isArray(h)||h.length<3){throw"Need a polygon array"}i=h;l.beginPath();l.moveTo(h[0].x,h[0].y);for(var w=0,J;J=h[w];w++){l.lineTo(J.x,J.y)}l.clip();return this};this.removeClip=function(h){l.restore();if(h){l.canvas.height=l.canvas.height-1;l.canvas.height=l.canvas.height+1}return this};function q(){var J=0,w,K;j.clearRect(0,0,j.canvas.width,j.canvas.height);j.save();j.shadowColor=p?"#fff":"rgb("+u+","+n+","+b+")";for(;J<B;J++){w=F*J*H*0.67;K=F-w;j.beginPath();j.arc(-F,F,K,0,2*Math.PI);j.shadowOffsetX=G*(J+1);j.shadowBlur=w;j.fill()}j.restore();if(p){for(J=G;J<D.height;J*=2){j.drawImage(D,0,0,D.width,J,0,J,D.width,J)}j.globalCompositeOperation="source-atop";for(J=0;J<e;J++){var h=m.getColor(J/e);j.fillStyle="rgb("+h.r+","+h.g+","+h.b+")";j.fillRect(0,J*G,D.width,G)}}k.clearRect(0,0,E.width,E.height);k.drawImage(D,0,0,D.width,D.height,0,0,E.width,E.height)}function r(h){return(typeof h==="number")}};ParticleJS.Shader2D.CanvasSprites=function(t){t=t||{};var c=t.canvas,k=c.getContext("2d"),y,n,o=t.spriteSheet||null,r=o?o.complete:!1,d=t.cellsX,e=t.cellsY,j=t.count||(d*e),l=r?o.width/d:0,f=r?o.height/e:0,m=l*0.5,g=f*0.5,x=t.useScan||!1,i=t.clearOpacity||1,s=t.keepAlpha||!1,a=t.image||null,u=t.scaleX||1,v=t.scaleY||1,b=t.callback||null;this.init=function(h){y=c.width=h.width;n=c.height=h.height;if(r){if(b){setTimeout(function(){b({success:!0})},0)}}else{o=new Image;o.onload=function(){l=o.width/d;f=o.height/e;m=l*0.5;g=f*0.5;if(b){b({success:!0})}r=!0};o.src=t.url}};this.preRender=function(){if(i===1){if(a){k.drawImage(a,0,0,y,n)}else{k.clearRect(0,0,y,n)}}else{k.globalAlpha=i;if(a){k.drawImage(a,0,0,y,n)}else{if(s){k.globalCompositeOperation="source-atop";k.fillRect(0,0,y,n);k.globalCompositeOperation="source-over"}else{k.fillRect(0,0,y,n)}}}};this.renderParticle=function(A){if(r){var h,w,z,B=A.size;if(x){z=((j-1)*A.lifeIndex)|0;h=(z%d)*l;w=((z/d)|0)*f}else{h=(((d-1)*A.blur)|0)*l;w=(((e-1)*A.lifeIndex)|0)*f}k.globalAlpha=A.opacity;if(A.rotation){k.translate(A.x,A.y);k.rotate(A.rotation);k.translate(-B*0.5*u,-B*0.5*v);k.drawImage(o,h,w,l,f,0,0,B*u,B*v);k.setTransform(1,0,0,1,0,0)}else{k.drawImage(o,h,w,l,f,A.x-B*0.5*u,A.y-B*0.5*v,B*u,B*v)}}};this.postRender=function(h){};this.getDrawObject=function(){return{begin:function(){k.beginPath()},close:function(){k.closePath()},arc:function(B,C,z,A,w,h){k.moveTo(B+z,C);k.arc(B,C,z,A,w,h?h:!1)},circle:function(w,z,h){k.moveTo(w+h,z);k.arc(w,z,h,0,2*Math.PI)},rect:function(B,C,A,z){k.rect(B,C,A,z)},moveTo:function(h,w){k.moveTo(h,w)},lineTo:function(h,w){k.lineTo(h,w)},line:function(h,z,w,A){k.moveTo(h,z);k.lineTo(w,A)},commit:function(){k.strokeStyle="#fff";k.stroke()},rotate:function(h){k.rotate(h)},translate:function(h,w){k.translate(h,w)},reset:function(){k.setTransform(1,0,0,1,0,0)},width:y,height:n}};this.clear=function(){if(y){k.clearRect(0,0,y,n)}return this};this.clearOpacity=function(h){if(!arguments.length){return i}i=h;k.fillStyle="rgba(0,0,0,"+i+")";return this};this.keepAlpha=function(h){if(typeof h==="boolean"){s=h;return this}else{return s}};this.setClip=function(h){k.save();if(!Array.isArray(h)||h.length<3){throw"Need a polygon array"}clipArr=h;k.beginPath();k.moveTo(h[0].x,h[0].y);for(var w=0,z;z=h[w];w++){k.lineTo(z.x,z.y)}k.clip();return this};this.removeClip=function(h){k.restore();if(h){k.canvas.height=k.canvas.height-1;k.canvas.height=k.canvas.height+1}return this};function p(){var z=0,w,A;cs.clearRect(0,0,cs.canvas.width,cs.canvas.height);cs.save();cs.shadowColor=hasGradient?"#fff":"rgb("+red+","+green+","+blue+")";for(;z<scnt;z++){w=spriteHalfSize*z*sstep*0.67;A=spriteHalfSize-w;cs.beginPath();cs.arc(-spriteHalfSize,spriteHalfSize,A,0,2*Math.PI);cs.shadowOffsetX=spriteSize*(z+1);cs.shadowBlur=w;cs.fill()}cs.restore();if(hasGradient){for(z=spriteSize;z<sprite.height;z*=2){cs.drawImage(sprite,0,0,sprite.width,z,0,z,sprite.width,z)}cs.globalCompositeOperation="source-atop";for(z=0;z<ccnt;z++){var h=gradient.getColor(z/ccnt);cs.fillStyle="rgb("+h.r+","+h.g+","+h.b+")";cs.fillRect(0,z*spriteSize,sprite.width,spriteSize)}}csHalf.clearRect(0,0,spriteHalf.width,spriteHalf.height);csHalf.drawImage(sprite,0,0,sprite.width,sprite.height,0,0,spriteHalf.width,spriteHalf.height)}function q(h){return(typeof h==="number")}};ParticleJS.Shader2D.Preview=function(a){var b,d,c;this.init=function(f){b=a.getContext("2d");d=a.width=f.width;c=a.height=f.height};this.preRender=function(){b.clearRect(0,0,d,c);b.beginPath()};this.renderParticle=function(e){b.rect(e.x-e.sizeR,e.y-e.sizeR,e.size,e.size)};this.postRender=function(){b.strokeStyle="#fff";b.stroke()};this.getDrawObject=function(){return{begin:function(){b.beginPath()},circle:function(f,g,e){b.moveTo(f+e,g);b.arc(f,g,e,0,2*Math.PI)},rect:function(g,i,f,e){b.rect(g,i,f,e)},moveTo:function(e,f){b.moveTo(e,f)},lineTo:function(e,f){b.lineTo(e,f)},line:function(e,g,f,h){b.moveTo(e,g);b.lineTo(f,h)},commit:function(){b.strokeStyle="#fff";b.stroke()},rotate:function(e){b.rotate(e)},translate:function(e,f){b.translate(e,f)},reset:function(){b.setTransform(1,0,0,1,0,0)}}}};ParticleJS.Gradient=function(){this.width=256;this.stops=[];this.cache=null};ParticleJS.Gradient.prototype.addStop=function(b,a){this.stops.push({pos:b,color:a});return this};ParticleJS.Gradient.prototype.generate=function(){var k=this.width,d=document.createElement("canvas"),e=d.getContext("2d"),f=e.createLinearGradient(0,0,k,0),h,a,g=0,j=0,b;d.width=k;d.height=1;for(;b=this.stops[g++];){f.addColorStop(b.pos,b.color)}e.fillStyle=f;e.fillRect(0,0,k,1);h=e.getImageData(0,0,k,1);a=h.data;this.cache=new Uint8Array(k*3);for(g=0;g<a.length;g+=4){this.cache[j++]=a[g];this.cache[j++]=a[g+1];this.cache[j++]=a[g+2]}};ParticleJS.Gradient.prototype.getColor=function(b){b=Math.min(1,Math.max(0,b));var a=((b*(this.width-1))|0)*3;return{r:this.cache[a],g:this.cache[a+1],b:this.cache[a+2]}};function Vector(a,b){this.x=0;this.y=0;if(arguments.length===2){this.fromAngleMag(a,b)}}Vector.prototype={add:function(a){this.x+=a.x;this.y+=a.y},addValue:function(a){this.x+=a;this.y+=a},addXY:function(a,b){this.x+=a;this.y+=b},addScale:function(b,a){this.x+=b.x*a;this.y+=b.y*a},sub:function(a){this.x-=a.x;this.y-=a.y},subValue:function(a){this.x-=a;this.y-=a},subXY:function(a,b){this.x-=a;this.y-=b},subScale:function(b,a){this.x-=b.x*a;this.y-=b.y*a},mul:function(a){this.x*=a.x;this.y*=a.y},scale:function(a){this.x*=a;this.y*=a},div:function(a){this.x/=a.x;this.y/=a.y},divFactor:function(a){if(a){this.x/=a;this.y/=a}},norm:function(){var a=this.getMag();this.divFactor(a)},reflect:function(b){var a=2*this.dot(this,b);this.x-=a*b.x;this.y-=a*b.y},invert:function(){this.x*=-1;this.y*=-1},invertX:function(){this.x*=-1},invertY:function(){this.y*=-1},rotate:function(b){var c=this.x*Math.sin(b)+this.y*Math.cos(b);this.x=this.x*Math.cos(b)-this.y*Math.sin(b);this.y=c},fromAngleMag:function(b,c){this.x=c*Math.cos(b);this.y=c*Math.sin(b)},fromXY:function(a,b){this.x=a;this.y=b},getNormal:function(){var b=this.getAngle();return new Vector(Math.sin(b),-Math.cos(b))},dot:function(a,b){return a.x*b.x+a.y*b.y},cross:function(a,b){return a.x*b.x-a.y*b.y},getMag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagNoSqrt:function(){return this.x*this.x+this.y*this.y},getAngle:function(){return Math.atan2(this.y,this.x)},project:function(b){var a=this.dot(this,b)/b.getMagNoSqrt();this.x=b.x*a;this.y=b.y*a},clone:function(){var a=new Vector();a.x=this.x;a.y=this.y;return a},toJSON:function(){return"{"+this.toString()+"}"},toString:function(){return"x: "+this.x+", y: "+this.y}};